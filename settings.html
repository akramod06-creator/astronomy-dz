<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script>
    (() => {
      if (location.protocol === "http:" || location.protocol === "https:") {
        const manifest = document.createElement("link");
        manifest.rel = "manifest";
        manifest.href = "./manifest.webmanifest";
        document.head.appendChild(manifest);
      }
    })();
  </script>
  <meta name="theme-color" content="#0d274c" />
  <title>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª | Astronomy DZ</title>
  <style>
    :root {
      --bg0: #050a17;
      --bg1: #0f1f3e;
      --line: rgba(132, 190, 255, 0.28);
      --panel: rgba(8, 17, 34, 0.78);
      --text: #e8f3ff;
      --muted: #9fb8d9;
      --developer-bg: url("./assets/images/developer-about-bg.jpg");
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Cairo", "Segoe UI", Tahoma, Arial, sans-serif;
    }

    body {
      min-height: 100vh;
      color: var(--text);
      background:
        radial-gradient(1000px 780px at 10% 10%, rgba(45, 99, 178, 0.25), transparent 66%),
        radial-gradient(900px 680px at 90% 90%, rgba(28, 132, 166, 0.2), transparent 68%),
        linear-gradient(165deg, var(--bg1), var(--bg0) 62%);
      padding: 16px;
      display: grid;
      place-items: center;
    }

    .app {
      width: min(860px, 100%);
      border: 1px solid var(--line);
      border-radius: 16px;
      background: rgba(6, 13, 27, 0.82);
      backdrop-filter: blur(8px);
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.45);
      padding: 16px;
      display: grid;
      gap: 14px;
    }

    .top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      border: 1px solid var(--line);
      border-radius: 11px;
      background: var(--panel);
      padding: 10px 12px;
    }

    .top a {
      text-decoration: none;
      color: #d9ecff;
      border: 1px solid rgba(138, 198, 255, 0.3);
      border-radius: 8px;
      padding: 7px 10px;
      background: rgba(8, 18, 36, 0.76);
      font-size: 13px;
    }

    h1 {
      font-size: 24px;
    }

    .group {
      border: 1px solid var(--line);
      border-radius: 12px;
      background: var(--panel);
      padding: 12px;
      display: grid;
      gap: 10px;
    }

    .group-title {
      font-size: 13px;
      color: #b8dcff;
      letter-spacing: 0.2px;
      font-weight: 700;
    }

    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      align-items: center;
      gap: 10px;
    }

    .actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }

    label {
      font-size: 14px;
      color: #d2e6ff;
    }

    select,
    button,
    input[type="range"] {
      border: 1px solid rgba(128, 192, 255, 0.3);
      border-radius: 8px;
      background: rgba(8, 18, 36, 0.9);
      color: #e1efff;
      padding: 8px 10px;
      font-size: 13px;
      width: 100%;
    }

    button {
      width: auto;
      cursor: pointer;
      min-width: 120px;
    }

    input[type="range"] {
      padding: 6px;
      accent-color: #78c8ff;
    }

    .range-wrap {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 10px;
    }

    .value-chip {
      min-width: 52px;
      text-align: center;
      font-size: 12px;
      color: #cfe9ff;
      border: 1px solid rgba(128, 194, 255, 0.32);
      border-radius: 999px;
      padding: 4px 8px;
      background: rgba(8, 18, 36, 0.7);
    }

    .hint {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.7;
    }

    .status {
      font-size: 13px;
      color: #b6dcff;
      border: 1px solid rgba(128, 195, 255, 0.26);
      border-radius: 10px;
      padding: 8px 10px;
      background: rgba(8, 18, 36, 0.62);
    }

    .developer-note {
      position: relative;
      overflow: hidden;
      font-size: 13px;
      color: #eaf3ff;
      line-height: 1.9;
      border: 1px solid rgba(126, 190, 255, 0.28);
      border-radius: 12px;
      padding: 12px;
      background:
        linear-gradient(160deg, rgba(5, 12, 26, 0.72), rgba(5, 14, 34, 0.84)),
        var(--developer-bg) center / cover no-repeat;
      box-shadow: inset 0 0 0 1px rgba(132, 196, 255, 0.14);
    }

    .developer-note::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background:
        linear-gradient(180deg, rgba(6, 12, 26, 0.12), rgba(4, 10, 24, 0.78)),
        radial-gradient(80% 70% at 12% 12%, rgba(119, 193, 255, 0.15), transparent 70%);
    }

    .developer-note-content {
      position: relative;
      z-index: 1;
      display: grid;
      gap: 10px;
    }

    .developer-note-title {
      font-size: 16px;
      font-weight: 800;
      color: #f0f8ff;
      text-shadow: 0 0 16px rgba(112, 195, 255, 0.28);
    }

    .developer-note p {
      margin: 0;
    }

    .developer-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: #d8eeff;
      border: 1px solid rgba(138, 204, 255, 0.36);
      border-radius: 999px;
      background: rgba(8, 20, 38, 0.62);
      width: fit-content;
      padding: 6px 12px;
      text-decoration: none;
      font-weight: 700;
      transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
    }

    .developer-link:hover {
      border-color: rgba(152, 219, 255, 0.64);
      box-shadow: 0 0 0 1px rgba(152, 219, 255, 0.22);
      transform: translateY(-1px);
    }

    @media (max-width: 740px) {
      .row {
        grid-template-columns: 1fr;
      }
      .actions {
        justify-content: stretch;
      }
      .actions button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <section class="app">
    <div class="top">
      <a id="homeLink" href="./index.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <strong>Astronomy DZ / Settings</strong>
    </div>

    <h1 id="pageTitle">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h1>

    <div class="group">
      <div id="experienceTitle" class="group-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ¬Ø±Ø¨Ø©</div>
      <div class="row">
        <label id="langLabel" for="langSelect">Ø§Ù„Ù„ØºØ©</label>
        <select id="langSelect">
          <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="en">English</option>
        </select>
      </div>
      <div class="row">
        <label id="qualityLabel" for="qualitySelect">Ø¬ÙˆØ¯Ø© Ø§Ù„Ø±Ø³ÙˆÙ…</label>
        <select id="qualitySelect">
          <option value="auto">ØªÙ„Ù‚Ø§Ø¦ÙŠ</option>
          <option value="high">Ø¹Ø§Ù„ÙŠØ©</option>
          <option value="balanced">Ù…ØªÙˆØ³Ø·Ø©</option>
          <option value="low">Ù…Ù†Ø®ÙØ¶Ø©</option>
        </select>
      </div>
      <div class="row">
        <label id="motionLabel" for="motionSelect">Ø­Ø¯Ø© Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„Ù…Ø¤Ø«Ø±Ø§Øª</label>
        <select id="motionSelect">
          <option value="full">ÙƒØ§Ù…Ù„Ø©</option>
          <option value="reduced">Ù…ØªÙˆØ³Ø·Ø©</option>
          <option value="minimal">Ù…Ù†Ø®ÙØ¶Ø©</option>
        </select>
      </div>
      <div class="row">
        <label id="soundModeLabel" for="soundModeSelect">Ù†Ù…Ø· Ø§Ù„ØµÙˆØª</label>
        <select id="soundModeSelect">
          <option value="cinematic">Cinematic</option>
          <option value="nasa">NASA Blend</option>
          <option value="deep">Deep Space</option>
          <option value="orbital">Orbital Hum</option>
          <option value="off">Ø¥ÙŠÙ‚Ø§Ù</option>
        </select>
      </div>
      <div class="row">
        <label id="soundVolumeLabel" for="soundVolumeRange">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¹Ø§Ù…</label>
        <div class="range-wrap">
          <input id="soundVolumeRange" type="range" min="0" max="1" step="0.01" value="0.45" />
          <span id="soundVolumeValue" class="value-chip">45%</span>
        </div>
      </div>
      <div class="actions">
        <button id="saveBtn" type="button">Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        <button id="resetBtn" type="button">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
      </div>
    </div>

    <div class="group">
      <div id="developerTitle" class="group-title">Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ±</div>
      <div id="developerNote" class="developer-note"></div>
    </div>

    <p id="hintText" class="hint">Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨ÙˆØª ÙˆØ§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù…Ø¯Ø§Ø±ÙŠØ© ÙˆØ§Ù„ØµÙˆØªØŒ ÙˆÙŠØªÙ… Ø­ÙØ¸Ù‡Ø§ Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­.</p>
    <div id="status" class="status">Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ù‡Ø²</div>
  </section>

  <script src="./app-settings.js"></script>
  <script>
    (() => {
      const api = window.ADZSettings;
      if (!api) return;

      const ui = {
        lang: document.getElementById("langSelect"),
        quality: document.getElementById("qualitySelect"),
        motion: document.getElementById("motionSelect"),
        soundMode: document.getElementById("soundModeSelect"),
        soundVolume: document.getElementById("soundVolumeRange"),
        soundVolumeValue: document.getElementById("soundVolumeValue"),
        save: document.getElementById("saveBtn"),
        reset: document.getElementById("resetBtn"),
        status: document.getElementById("status"),
        pageTitle: document.getElementById("pageTitle"),
        homeLink: document.getElementById("homeLink"),
        experienceTitle: document.getElementById("experienceTitle"),
        langLabel: document.getElementById("langLabel"),
        qualityLabel: document.getElementById("qualityLabel"),
        motionLabel: document.getElementById("motionLabel"),
        soundModeLabel: document.getElementById("soundModeLabel"),
        soundVolumeLabel: document.getElementById("soundVolumeLabel"),
        developerTitle: document.getElementById("developerTitle"),
        developerNote: document.getElementById("developerNote"),
        hintText: document.getElementById("hintText")
      };

      const I18N = {
        ar: {
          pageTitle: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
          homeLink: "Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
          experienceTitle: "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ¬Ø±Ø¨Ø©",
          langLabel: "Ø§Ù„Ù„ØºØ©",
          qualityLabel: "Ø¬ÙˆØ¯Ø© Ø§Ù„Ø±Ø³ÙˆÙ…",
          motionLabel: "Ø­Ø¯Ø© Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„Ù…Ø¤Ø«Ø±Ø§Øª",
          soundModeLabel: "Ù†Ù…Ø· Ø§Ù„ØµÙˆØª",
          soundVolumeLabel: "Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¹Ø§Ù…",
          saveBtn: "Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
          resetBtn: "Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·",
          developerTitle: "Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ±",
          developerNote: `
            <div class="developer-note-content">
              <div class="developer-note-title">ğŸŒŒ Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ±</div>
              <p>Ø£Ù†Ø§ Ø´Ø§Ø¨ Ø¬Ø²Ø§Ø¦Ø±ÙŠ Ø´ØºÙˆÙ Ø¨Ø¹Ù„Ù… Ø§Ù„ÙÙ„Ùƒ ÙˆØ§Ù„ØªÙ‚Ù†ÙŠØ©ØŒ Ø£Ø¤Ù…Ù† Ø¨Ø£Ù† Ø§Ù„Ø³Ù…Ø§Ø¡ Ù„ÙŠØ³Øª ÙÙ‚Ø· Ù…Ø¬Ø§Ù„Ù‹Ø§ Ù„Ù„Ø¯Ù‡Ø´Ø©ØŒ Ø¨Ù„ Ø·Ø±ÙŠÙ‚Ù‹Ø§ Ù„Ù„ØªÙÙƒØ± ÙˆØ§Ù„Ù…Ø¹Ø±ÙØ©.</p>
              <p>Ø£Ù†Ø´Ø£Øª ØªØ·Ø¨ÙŠÙ‚ <strong>Astronomy DZ</strong> Ø¨Ù‡Ø¯Ù ØªØ¨Ø³ÙŠØ· Ø¹Ù„Ù… Ø§Ù„ÙÙ„Ùƒ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ ÙˆØ¬Ø¹Ù„ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„ÙƒÙˆÙ† ØªØ¬Ø±Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù…Ù…ØªØ¹Ø© Ù„ÙƒÙ„ Ù…Ù‡ØªÙ… Ø¨Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù„ÙƒÙˆØ§ÙƒØ¨.</p>
              <p>Ø£Ø¹Ù…Ù„ Ø¹Ù„Ù‰ ØªØ·ÙˆÙŠØ± Ù†ÙØ³ÙŠ ÙÙŠ Ù…Ø¬Ø§Ù„ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØµÙ†Ø§Ø¹Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¹Ù„Ù…ÙŠØŒ ÙˆØ£Ø³Ø¹Ù‰ Ù„Ø±Ø¨Ø· Ø§Ù„Ø§ÙƒØªØ´Ø§ÙØ§Øª Ø§Ù„ÙƒÙˆÙ†ÙŠØ© Ø¨Ø§Ù„ØªØ£Ù…Ù„ ÙˆØ§Ù„Ø¥ÙŠÙ…Ø§Ù†ØŒ Ù…Ø³ØªÙ„Ù‡Ù…Ù‹Ø§ Ø°Ù„Ùƒ Ù…Ù† Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø¥Ù„Ù‰ Ø§Ù„ÙƒÙˆÙ† ÙˆØ§Ù„Ø³Ù…Ø§Ø¡.</p>
              <p>Ù‡Ø¯ÙÙŠ Ø£Ù† ÙŠØµØ¨Ø­ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø­Ù‚ÙŠÙ‚ÙŠØ© ØªÙ†Ø´Ø± Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„ÙÙ„ÙƒÙŠ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± ÙˆØ§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ.</p>
              <p>ØµÙØ­ØªÙŠ Ø¹Ù„Ù‰ ØªÙŠÙƒ ØªÙˆÙƒ:</p>
              <a class="developer-link" href="https://www.tiktok.com/@k.m1691?is_from_webapp=1&sender_device=pc" target="_blank" rel="noopener noreferrer">@k.m1691</a>
            </div>
          `,
          hintText: "Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨ÙˆØª ÙˆØ§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù…Ø¯Ø§Ø±ÙŠØ© ÙˆØ§Ù„ØµÙˆØªØŒ ÙˆÙŠØªÙ… Ø­ÙØ¸Ù‡Ø§ Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­.",
          statusReady: "Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ù‡Ø²",
          statusSaved: "Ø§Ù„Ø­Ø§Ù„Ø©: ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
          statusReset: "Ø§Ù„Ø­Ø§Ù„Ø©: ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø·",
          quality: { auto: "ØªÙ„Ù‚Ø§Ø¦ÙŠ", high: "Ø¹Ø§Ù„ÙŠØ©", balanced: "Ù…ØªÙˆØ³Ø·Ø©", low: "Ù…Ù†Ø®ÙØ¶Ø©" },
          motion: { full: "ÙƒØ§Ù…Ù„Ø©", reduced: "Ù…ØªÙˆØ³Ø·Ø©", minimal: "Ù…Ù†Ø®ÙØ¶Ø©" },
          sound: {
            cinematic: "Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ",
            nasa: "Ù…Ø²ÙŠØ¬ Ù†Ø§Ø³Ø§",
            deep: "ÙØ¶Ø§Ø¡ Ø¹Ù…ÙŠÙ‚",
            orbital: "Ù‡Ù…Ù‡Ù…Ø© Ù…Ø¯Ø§Ø±ÙŠØ©",
            off: "Ø¥ÙŠÙ‚Ø§Ù"
          }
        },
        en: {
          pageTitle: "Settings",
          homeLink: "Back to Home",
          experienceTitle: "Experience Settings",
          langLabel: "Language",
          qualityLabel: "Graphics Quality",
          motionLabel: "Motion and Effects",
          soundModeLabel: "Sound Profile",
          soundVolumeLabel: "Master Volume",
          saveBtn: "Save Settings",
          resetBtn: "Reset",
          developerTitle: "About the Developer",
          developerNote: `
            <div class="developer-note-content">
              <div class="developer-note-title">ğŸŒŒ About The Developer</div>
              <p>I am a young Algerian passionate about astronomy and technology. I believe the sky is not only a source of wonder, but also a path to reflection and knowledge.</p>
              <p>I built <strong>Astronomy DZ</strong> to simplify astronomy in Arabic and make space exploration an engaging interactive experience for everyone interested in stars and planets.</p>
              <p>I continue to grow in programming and science communication, and I aim to connect cosmic discoveries with contemplation and faith.</p>
              <p>My goal is to make this project a true educational platform that spreads astronomy awareness in Algeria and the Arab world.</p>
              <p>My TikTok page:</p>
              <a class="developer-link" href="https://www.tiktok.com/@k.m1691?is_from_webapp=1&sender_device=pc" target="_blank" rel="noopener noreferrer">@k.m1691</a>
            </div>
          `,
          hintText: "These settings affect Astro Bot language, orbital simulation quality, and sound. They are saved locally in your browser.",
          statusReady: "Status: Ready",
          statusSaved: "Status: Settings saved",
          statusReset: "Status: Defaults restored",
          quality: { auto: "Auto", high: "High", balanced: "Balanced", low: "Low" },
          motion: { full: "Full", reduced: "Reduced", minimal: "Minimal" },
          sound: {
            cinematic: "Cinematic",
            nasa: "NASA Blend",
            deep: "Deep Space",
            orbital: "Orbital Hum",
            off: "Off"
          }
        }
      };

      const getLang = () => (ui.lang.value === "en" ? "en" : "ar");
      const getText = () => I18N[getLang()];

      const renderVolume = (value) => {
        const pct = Math.round(Number(value) * 100);
        ui.soundVolumeValue.textContent = `${Number.isFinite(pct) ? pct : 0}%`;
      };

      const renderLabels = () => {
        const t = getText();
        document.documentElement.lang = getLang();
        document.documentElement.dir = getLang() === "ar" ? "rtl" : "ltr";
        ui.pageTitle.textContent = t.pageTitle;
        ui.homeLink.textContent = t.homeLink;
        ui.experienceTitle.textContent = t.experienceTitle;
        ui.langLabel.textContent = t.langLabel;
        ui.qualityLabel.textContent = t.qualityLabel;
        ui.motionLabel.textContent = t.motionLabel;
        ui.soundModeLabel.textContent = t.soundModeLabel;
        ui.soundVolumeLabel.textContent = t.soundVolumeLabel;
        ui.save.textContent = t.saveBtn;
        ui.reset.textContent = t.resetBtn;
        ui.developerTitle.textContent = t.developerTitle;
        ui.developerNote.innerHTML = t.developerNote;
        ui.hintText.textContent = t.hintText;

        Array.from(ui.quality.options).forEach((option) => {
          option.textContent = t.quality[option.value] || option.value;
        });
        Array.from(ui.motion.options).forEach((option) => {
          option.textContent = t.motion[option.value] || option.value;
        });
        Array.from(ui.soundMode.options).forEach((option) => {
          option.textContent = t.sound[option.value] || option.value;
        });
      };

      const setStatus = (messageKey) => {
        const t = getText();
        ui.status.textContent = t[messageKey] || t.statusReady;
      };

      const apply = (settings) => {
        ui.lang.value = settings.lang;
        ui.quality.value = settings.quality;
        ui.motion.value = settings.motion;
        ui.soundMode.value = settings.soundMode;
        ui.soundVolume.value = String(settings.soundVolume);
        renderVolume(settings.soundVolume);
        renderLabels();
      };

      const readForm = () => ({
        lang: ui.lang.value === "en" ? "en" : "ar",
        quality: ui.quality.value,
        motion: ui.motion.value,
        soundMode: ui.soundMode.value,
        soundVolume: Number(ui.soundVolume.value),
        soundEnabled: ui.soundMode.value !== "off"
      });

      const current = api.load();
      apply(current);
      setStatus("statusReady");

      ui.lang.addEventListener("change", () => {
        renderLabels();
        setStatus("statusReady");
      });

      ui.soundVolume.addEventListener("input", () => {
        renderVolume(ui.soundVolume.value);
      });

      ui.soundMode.addEventListener("change", () => {
        if (ui.soundMode.value === "off") {
          ui.soundVolume.value = "0";
          renderVolume(0);
        } else if (Number(ui.soundVolume.value) === 0) {
          ui.soundVolume.value = "0.45";
          renderVolume(0.45);
        }
      });

      ui.save.addEventListener("click", () => {
        const saved = api.save(readForm());
        apply(saved);
        setStatus("statusSaved");
      });

      ui.reset.addEventListener("click", () => {
        const reset = api.save(api.DEFAULTS);
        apply(reset);
        setStatus("statusReset");
      });

      window.addEventListener("adz:settings-changed", (event) => {
        if (!event.detail) return;
        apply(event.detail);
      });
    })();
  </script>
  <script src="./pwa-register.js"></script>
</body>
</html>
